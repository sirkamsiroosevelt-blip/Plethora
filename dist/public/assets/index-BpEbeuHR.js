(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const a of n.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function i(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerPolicy&&(n.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?n.credentials="include":o.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(o){if(o.ep)return;o.ep=!0;const n=i(o);fetch(o.href,n)}})();const p=[{id:1,title:"What is an Ionic Bond?",video:"https://www.youtube.com/embed/0cQkddGqIN4",quiz:"https://forms.gle/example",subtopics:[{title:"Definition",content:"A chemical bond formed through the electrostatic attraction between oppositely charged ions."},{title:"Key Mechanism",content:"Electron transfer from metal to non-metal."},{title:"Result",content:"Formation of crystal lattices."},{title:"Example",content:"Sodium Chloride (NaCl)"},{title:"Energy",content:"Involves lattice energy release."},{title:"Stability",content:"Atoms achieve noble gas configuration."},{title:"Cations",content:"Positive ions (lost electrons)."},{title:"Anions",content:"Negative ions (gained electrons)."}]},{id:2,title:"Formation Process",video:"https://www.youtube.com/embed/KUoNx-BcG3I",quiz:"#",subtopics:[{title:"Step 1",content:"Metal atom loses valence electrons."},{title:"Step 2",content:"Non-metal atom gains electrons."},{title:"Step 3",content:"Formation of ions with opposite charges."},{title:"Step 4",content:"Electrostatic attraction pulls ions together."}]},{id:3,title:"Physical Properties",video:"https://www.youtube.com/embed/TxK52gK9d94",quiz:"#",subtopics:[{title:"Melting Point",content:"Very high due to strong bonds."},{title:"Solubility",content:"Often soluble in water."},{title:"Conductivity",content:"Conducts when molten or dissolved."},{title:"State",content:"Solid crystalline structure at room temp."}]},{id:4,title:"Lattice Structure",video:"https://www.youtube.com/embed/Rxq287hWk1Y",quiz:"#",subtopics:[{title:"Grid Pattern",content:"Repeating 3D arrangement of ions."},{title:"Coordination",content:"Number of nearest neighbors."},{title:"Strength",content:"Determines melting point."},{title:"Brittleness",content:"Shatters when layers shift."}]},{id:5,title:"Common Examples",video:"https://www.youtube.com/embed/VFk8aO-aE60",quiz:"#",subtopics:[{title:"NaCl",content:"Table Salt"},{title:"MgO",content:"Magnesium Oxide"},{title:"CaCl2",content:"Calcium Chloride"},{title:"KI",content:"Potassium Iodide"}]},{id:6,title:"Project Source Code",video:"",quiz:"#",isCode:!0,subtopics:[]}];let l=JSON.parse(localStorage.getItem("ionicModuleData"))||p,c=sessionStorage.getItem("isAdmin")==="true",u=JSON.parse(localStorage.getItem("ionicModuleProgress"))||[];window.toggleSub=function(t){const e=t.parentElement;if(e.classList.toggle("active"),e.classList.contains("active")){const i=e.closest(".card").dataset.id,s=t.querySelector("span").innerText,o=`${i}-${s}`;u.includes(o)||(u.push(o),localStorage.setItem("ionicModuleProgress",JSON.stringify(u)),m())}};window.handleCardClick=function(t,e){t.target.closest("button")||t.target.closest("input")||t.target.isContentEditable||t.target.classList.contains("sub-header")||(document.querySelectorAll(".card.expanded").forEach(i=>{i!==e&&i.classList.remove("expanded")}),e.classList.toggle("expanded"),e.classList.contains("expanded")&&setTimeout(()=>{e.scrollIntoView({behavior:"smooth",block:"start"})},300))};window.closeCard=function(t,e){t.stopPropagation(),e.closest(".card").classList.remove("expanded")};window.toggleAdmin=function(){c?(c=!1,sessionStorage.setItem("isAdmin","false"),d()):prompt("Enter Admin Password:")==="kamsi"?(c=!0,sessionStorage.setItem("isAdmin","true"),d()):alert("Incorrect Password")};window.updateTopic=function(t,e,i){l[t][e]=i,r()};window.updateSub=function(t,e,i,s){l[t].subtopics[e][i]=s,r()};window.addTopic=function(){l.push({id:Date.now(),title:"New Topic",video:"",quiz:"#",subtopics:[]}),d(),r()};window.deleteTopic=function(t,e){t.stopPropagation(),confirm("Delete this topic?")&&(l.splice(e,1),d(),r())};window.addSub=function(t){l[t].subtopics.push({title:"New Subtopic",content:"Enter content here..."}),d(),setTimeout(()=>{document.querySelectorAll(".card")[t].classList.add("expanded")},100),r()};window.deleteSub=function(t,e){l[t].subtopics.splice(e,1),d(),setTimeout(()=>{document.querySelectorAll(".card")[t].classList.add("expanded")},100),r()};window.duplicatePage=function(){if(l.length>0){const t=JSON.parse(JSON.stringify(l[l.length-1]));t.id=Date.now(),t.title+=" (Copy)",l.push(t),d(),r()}};window.toggleTheme=function(){document.body.classList.toggle("light-mode");const t=document.body.classList.contains("light-mode");localStorage.setItem("ionicTheme",t?"light":"dark");const e=document.getElementById("themeBtn");e.innerText=t?"ðŸŒ™":"â˜€ï¸"};function r(){localStorage.setItem("ionicModuleData",JSON.stringify(l))}function g(){const t=document.getElementById("adminBtn");t.textContent=c?"Exit Admin":"Admin Login",document.body.classList.toggle("admin-mode",c),document.getElementById("adminTools").style.display=c?"flex":"none"}function m(){let t=0;l.forEach(s=>t+=s.subtopics.length),t===0&&(t=1);const e=u.length,i=Math.min(100,Math.round(e/t*100));document.getElementById("progressFill").style.width=i+"%",document.getElementById("progressText").innerText=i+"% Complete"}function d(){const t=document.getElementById("topicGrid");t.innerHTML="",l.forEach((e,i)=>{const s=document.createElement("div");s.className="card",s.dataset.id=e.id,s.onclick=n=>window.handleCardClick(n,s);let o=`
            <div class="card-header">
                <div>
                    <div class="card-icon">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"/>
                        </svg>
                    </div>
                    <h3 class="card-title" ${c?'contenteditable="true" onblur="updateTopic('+i+`, 'title', this.innerText)"`:""}>${e.title}</h3>
                    <span class="card-preview">Click to explore module</span>
                </div>
                ${c?`<button class="btn btn-danger" onclick="deleteTopic(event, ${i})">Ã—</button>`:""}
            </div>
        `;o+='<div class="card-content">',o+='<div class="video-section">',e.isCode?o+='<div class="code-box" id="codeDisplay">Loading source code...</div>':o+=`
                <div class="video-container">
                    <iframe src="${e.video}" allowfullscreen></iframe>
                </div>
                ${c?`<input type="text" class="btn" style="width:100%; margin-top:10px; background:#000;" value="${e.video}" onchange="updateTopic(${i}, 'video', this.value)">`:""}
            `,o+="</div>",o+='<div class="subtopics-section">',e.isCode||(o+='<div class="sub-grid">',e.subtopics.forEach((n,a)=>{o+=`
                    <div class="sub-card">
                        <div class="sub-header" onclick="toggleSub(this)">
                            <span ${c?'contenteditable="true" onblur="updateSub('+i+","+a+`, 'title', this.innerText)"`:""}>${n.title}</span>
                            <span>â–¼</span>
                        </div>
                        <div class="sub-body" ${c?'contenteditable="true" onblur="updateSub('+i+","+a+`, 'content', this.innerText)"`:""}>
                            ${n.content}
                        </div>
                        ${c?`<button class="btn btn-danger" style="width:100%; border-radius:0;" onclick="deleteSub(${i}, ${a})">Remove</button>`:""}
                    </div>
                 `}),c&&(o+=`
                    <button class="btn btn-primary" onclick="addSub(${i})">+ Add Sub-topic</button>
                 `),o+="</div>",o+=`
                <a href="${e.quiz}" target="_blank" class="quiz-btn">Take Quiz</a>
                ${c?`<input type="text" class="btn" style="width:100%; margin-top:5px;" value="${e.quiz}" onchange="updateTopic(${i}, 'quiz', this.value)" placeholder="Quiz URL">`:""}
             `),o+="</div>",o+='<button class="close-btn" onclick="closeCard(event, this)">Close Card</button>',o+="</div>",s.innerHTML=o,t.appendChild(s)}),g(),m(),document.getElementById("codeDisplay")&&h()}async function h(){const t=document.getElementById("codeDisplay");if(t)try{const e=await fetch("/index.html"),i=await fetch("/src/style.css"),s=await fetch("/src/app.js"),o=await e.text(),n=await i.text(),a=await s.text();t.textContent=`/* --- HTML (index.html) --- */
${o}

/* --- CSS (style.css) --- */
${n}

/* --- JS (app.js) --- */
${a}`}catch{t.textContent="Error loading source code."}}document.addEventListener("DOMContentLoaded",()=>{localStorage.getItem("ionicTheme")==="light"&&(document.body.classList.add("light-mode"),document.getElementById("themeBtn").innerText="ðŸŒ™"),d()});
